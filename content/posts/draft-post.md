# 使用Python并发让你更快享用午餐

> 一个关于线程、异步、多进程和云函数的午餐时间故事。
>
> 原作者：[Brendan Maginnis](https://sourcery.ai/blog/concurrency/)

## 简介

我将给你们讲一个故事来解释Python中不同的并发和并行选项。

在这个故事中，我们将看到为什么单个人的多任务处理像并发，而多个人执行自己的任务就像并行处理。 我们将在一些知名餐厅的午餐时间观察这些场景在实际中是否可以快速而有效地为客户提供服务。之后，我将使用Python模拟各类餐厅，最后比较不同的并发方案，并说明它们分别适用与何种场景。

在接下来的内容中，我会解释如下几点：

* 并发和并行之间有什么区别？
* 比较不同的并发方案，包括线程，异步，多进程和云函数
* 每种并发方案的优缺点
* 如何使用简单的流程图找到适合场景的并发方案

## 什么是并发？什么是并行？

让我们从它们的定义说起：

>如果一个系统可以同时支持两个或多个正在进行的操作，则称该系统是并发的。
>
>如果一个系统可以支持同时执行的两个或多个动作，则称该系统为并行系统。
>
>这两个概念之间的关键区别是“进行中”这一定义。
>
>——《并发的艺术》

现在让我们直接进入故事环节。

正值午餐时间，你转过一条从未见过的街道。摆在你面前的有两种就餐选择：一个叫**Concurrent Burgers**的市场摊位和一个叫**Parallel Salads**的商店。

两家店看起来都很美味，但排队的人又很多，所以你想知道哪家能先为你服务。

**Concurrent Burgers**由一名中年女士经营，工作时开心大笑，手臂上有着Python的蟒蛇纹身。她正在执行以下任务：

* 拿取一个订单
* 翻转汉堡肉饼
* 将沙拉、肉饼和调味料加入，完成订单

她在任务之间无缝切换。首先，她检查烤架上的肉饼，然后取出煮熟的肉饼；之后，她取出一个订单；在之后如果有肉饼，她就可以完成一个多汁的汉堡，并结束订单。

**Parallel Salads**则配备了许多人手，在工作中他们时刻微笑并礼貌地和顾客交谈。他们每个人都分别为一名顾客做沙拉。他们取订单，将所有成分添加到干净的碗中，优雅而干练，将它们充分混合，之后将沙拉放入给顾客的容器中，把之前的碗递给另一名员工。 于此同时，那名员工就负责洗碗。